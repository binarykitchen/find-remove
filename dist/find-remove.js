var e,n,r=require("fs"),i=require("path"),t=require("fmerge"),a=require("rimraf");function u(n,i){var t=r.statSync(n).mtime.getTime();return e>t+1e3*i}function f(e){return e&&"limit"in e}function o(e){return e&&"totalRemoved"in e}function c(e){return o(e)?e.totalRemoved:-2}function s(e){return c(e)>=function(e){return f(e)?e.limit:-1}(e)}function l(e){return e&&"maxLevel"in e}function v(e){return l(e)?e.maxLevel:-1}function m(e){return e&&e.age&&e.age.seconds?e.age.seconds:null}var d=module.exports=function(x,y,g){var A={};if(!s(y)&&r.existsSync(x)){var O=v(y),h=!1;f(y)&&(y.totalRemoved=o(y)?c(y):0),void 0===g?g=0:g++,g<1?(e=(new Date).getTime(),n=function(e){return!(!e||!("test"in e))&&e.test}(y)):h=function(e,n,r){var t=!1,a=n&&n.dir;if(a){var o=m(n),c=i.basename(e);Array.isArray(a)?t=-1!==a.indexOf("*")||-1!==a.indexOf(c):(n.regex&&c.match(new RegExp(a))||c===a||"*"===a)&&(t=!0),t&&f(n)&&(t=!s(n)),t&&l(n)&&r>0&&(t=r<=v(n)),o&&t&&(t=u(e,o))}return t}(x,y,g),(-1===O||g<O)&&r.readdirSync(x).forEach(function(e){var a,c=i.join(x,e),l=!1;try{a=r.statSync(c)}catch(e){l=!0}if(l);else if(a.isDirectory()){var v=d(c,y,g);A=t(A,v),o(y)&&(y.totalRemoved+=Object.keys(v).length)}else if(function(e,n){void 0===n&&(n={});var r=!1,t=n.extensions?n.extensions:null,a=n.files?n.files:null,o=n.prefix?n.prefix:null,c=n&&n.ignore?n.ignore:null,l=i.basename(e);if(a&&(r=Array.isArray(a)?-1!==a.indexOf("*.*")||-1!==a.indexOf(l):!!(n.regex&&l.match(new RegExp(a))||"*.*"===a)||l===a),!r&&t){var v=i.extname(e);r=Array.isArray(t)?-1!==t.indexOf(v):v===t}if(!r&&o&&(r=0===l.indexOf(o)),r&&f(n)&&(r=!s(n)),r&&c&&(r=Array.isArray(c)?!(-1!==c.indexOf(l)):!(l===c)),r){var d=m(n);d&&(r=u(e,d))}return r}(c,y)){var O;if(n)O=!0;else try{r.unlinkSync(c),O=!0}catch(e){}O&&(A[c]=!0,o(y)&&y.totalRemoved++)}}),h&&(n||a.sync(x),o(y)||(A[x]=!0))}return A};
//# sourceMappingURL=find-remove.js.map

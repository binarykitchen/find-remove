var e=require("fs"),i=require("path"),t=require("rimraf");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n,a,o=/*#__PURE__*/r(e),d=/*#__PURE__*/r(i);function l(e,i){if(!n)return!1;var t=o.default.statSync(e).mtime.getTime();return n>t+1e3*i}function f(e){return void 0===e&&(e={}),void 0!==e.totalRemoved?e.totalRemoved:-2}function v(e){return void 0===e&&(e={}),f(e)>=function(e){return void 0===e&&(e={}),void 0!==e.limit?e.limit:-1}(e)}function u(e){return void 0===e&&(e={}),void 0!==e.maxLevel?e.maxLevel:-1}function c(e){return void 0===e&&(e={}),e.age&&e.age.seconds?e.age.seconds:null}var s=function(e,i,r){void 0===i&&(i={});var m={};if(!v(i)&&o.default.existsSync(e)){var x=u(i),y=!1;void 0!==i.limit&&(i.totalRemoved=void 0!==i.totalRemoved?f(i):0),void 0===r?r=0:r++,r<1?(n=(new Date).getTime(),a=i.test):y=function(e,i,t){void 0===i&&(i={});var r=!1,n=i.dir;if(n){var a=c(i),o=d.default.basename(e);Array.isArray(n)?r=-1!==n.indexOf("*")||-1!==n.indexOf(o):(i.regex&&o.match(new RegExp(n))||o===n||"*"===n)&&(r=!0),r&&void 0!==i.limit&&(r=!v(i)),r&&void 0!==i.maxLevel&&t>0&&(r=t<=u(i)),a&&r&&(r=l(e,a))}return r}(e,i,r),(-1===x||r<x)&&o.default.readdirSync(e).forEach(function(t){var n,f,u=d.default.join(e,t),x=!1;try{f=o.default.statSync(u)}catch(e){x=!0}if(x);else if(null!=(n=f)&&n.isDirectory()){var y=s(u,i,r);m=Object.assign({},m,y),void 0!==i.totalRemoved&&(i.totalRemoved+=Object.keys(y).length)}else if(function(e,i){void 0===i&&(i={});var t=!1,r=i.extensions?i.extensions:null,n=i.files?i.files:null,a=i.prefix?i.prefix:null,o=i&&i.ignore?i.ignore:null,f=d.default.basename(e);if(n&&(t=Array.isArray(n)?-1!==n.indexOf("*.*")||-1!==n.indexOf(f):!!(i.regex&&f.match(new RegExp(n))||"*.*"===n)||f===n),!t&&r){var u=d.default.extname(e);t=Array.isArray(r)?-1!==r.indexOf(u):u===r}if(!t&&a&&(t=0===f.indexOf(a)),t&&void 0!==i.limit&&(t=!v(i)),t&&o&&(t=Array.isArray(o)?!(-1!==o.indexOf(f)):!(f===o)),t){var s=c(i);s&&(t=l(e,s))}return t}(u,i)){var g;if(a)g=!0;else try{o.default.unlinkSync(u),g=!0}catch(e){}g&&(m[u]=!0,void 0!==i.totalRemoved&&i.totalRemoved++)}}),y&&(a||t.rimrafSync(e),void 0===i.totalRemoved&&(m[e]=!0))}return m};module.exports=s;
//# sourceMappingURL=find-remove.js.map
